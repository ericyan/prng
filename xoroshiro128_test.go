package prng

import (
	"testing"
)

func TestXoroshiro128Plus(t *testing.T) {
	cases := []struct {
		seed [2]uint64
		nums []uint64
	}{
		{
			[2]uint64{1, 2},
			[]uint64{
				3,
				412333834243,
				2360170716294286339,
				9295852285959843169,
				2797080929874688578,
				6019711933173041966,
				3076529664176959358,
				3521761819100106140,
				7493067640054542992,
				920801338098114767,
			},
		},
		{
			[2]uint64{0x916df851e2aee44, 0x9ade0f09ffca1bc4},
			[]uint64{
				11814330020949985800,
				178116025177601275,
				145033829186018013,
				16896490903508864559,
				16980268691130450484,
				5244487829759414509,
				14718595838840491955,
				12794645289354158248,
				14731850310773961214,
				15760955841209160076,
			},
		},
	}

	for _, c := range cases {
		s := new(xoroshiro128Plus)
		s[0], s[1] = c.seed[0], c.seed[1]

		for i, n := range c.nums {
			if got := s.Uint64(); got != n {
				t.Errorf("xoroshiro128+{%d,%d}[%d]: expect %d, got %d\n", c.seed[0], c.seed[1], i, n, got)
			}
		}
	}
}

func TestXoroshiro128StarStar(t *testing.T) {
	cases := []struct {
		seed [2]uint64
		nums []uint64
	}{
		{
			[2]uint64{1, 2},
			[]uint64{
				5760,
				97769243520,
				9706862127477703552,
				9223447511460779954,
				8358291023205304566,
				15695619998649302768,
				8517900938696309774,
				16586480348202605369,
				6959129367028440372,
				16822147227405758281,
			},
		},
		{
			[2]uint64{0x916df851e2aee44, 0x9ade0f09ffca1bc4},
			[]uint64{
				9413986837710568134,
				16963639301612756327,
				3361809185189067920,
				1679600974018625883,
				11215288413652085074,
				9584979337351526738,
				6651141104362543988,
				14684216389961485922,
				9999914410292810040,
				10182909231930942051,
			},
		},
	}

	for _, c := range cases {
		s := new(xoroshiro128StarStar)
		s[0], s[1] = c.seed[0], c.seed[1]

		for i, n := range c.nums {
			if got := s.Uint64(); got != n {
				t.Errorf("xoroshiro128**{%d,%d}[%d]: expect %d, got %d\n", c.seed[0], c.seed[1], i, n, got)
			}
		}
	}
}
